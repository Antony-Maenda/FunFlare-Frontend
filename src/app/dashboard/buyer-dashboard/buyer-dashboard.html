<header class="bg-white/10 backdrop-blur-md shadow-sm">
  <nav class="container mx-auto flex items-center justify-between py-3 px-4 rounded-full">
    <!-- Logo -->
    <div class="text-3x1 sm:text-4xl font-bold font-bungee transform -rotate-2" style="text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);" aria-label="FunFlare Logo">
      <span class="bg-gradient-to-r from-pink-500 to-purple-500 bg-clip-text text-transparent">
        FunFlare
      </span>
    </div>

    <!-- Search (collapses better on small screens) -->
    <div class="w-full sm:w-auto flex-1 sm:mx-4 mt-3 sm:mt-0">
      <div class="relative">
        <input
          type="text"
          placeholder="Search events..."
          class="w-full px-4 py-2 bg-white/80 rounded-full text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 shadow-sm transition duration-200"
          aria-label="Search events"
        />
        <svg class="absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
        </svg>
      </div>
    </div>

  <!-- Right: Dropdowns -->
  <div class="flex items-center gap-4" *ngIf="userName !== 'Guest'">
  <!-- Wallet -->
  <div class="relative">
    <button
      (click)="toggleDropdown('wallet')"
      class="dropdown-btn px-3 py-1.5 h-10 text-white bg-cyan-400 rounded-full hover:bg-[#0e7490] shadow-sm hover:shadow-md transition-colors duration-150 font-bungee text-sm will-change-background"
      aria-label="View Wallet"
      [attr.aria-expanded]="walletOpen"
      aria-describedby="wallet-dropdown"
    >
      Wallet
    </button>
    <div
      *ngIf="walletOpen"
      id="wallet-dropdown"
      class="dropdown-menu absolute right-0 mt-1 w-36 bg-white/90 backdrop-blur-sm rounded-lg shadow-sm py-1 z-20 transition-all duration-150 ease-in-out transform origin-top"
      [ngClass]="{
        'opacity-0 scale-95 -translate-y-2': !walletOpen,
        'opacity-100 scale-100 translate-y-0': walletOpen
      }"
    >
      <p class="px-3 py-1 text-gray-800 text-sm">Balance: $120</p>
    </div>
  </div>

  <!-- Points -->
  <div class="relative">
    <button
      (click)="toggleDropdown('points')"
      class="dropdown-btn px-3 py-1.5 h-10 text-white bg-indigo-400 rounded-full hover:bg-[#4f46e5] shadow-sm hover:shadow-md transition-colors duration-150 font-bungee text-sm will-change-background"
      aria-label="View Points"
      [attr.aria-expanded]="pointsOpen"
      aria-describedby="points-dropdown"
    >
      Points
    </button>
    <div
      *ngIf="pointsOpen"
      id="points-dropdown"
      class="dropdown-menu absolute right-0 mt-1 w-36 bg-white/90 backdrop-blur-sm rounded-lg shadow-sm py-1 z-20 transition-all duration-150 ease-in-out transform origin-top"
      [ngClass]="{
        'opacity-0 scale-95 -translate-y-2': !pointsOpen,
        'opacity-100 scale-100 translate-y-0': pointsOpen
      }"
    >
      <p class="px-3 py-1 text-gray-800 text-sm">Points: 250</p>
    </div>
  </div>

  <!-- Profile -->
  <div class="relative">
    <button
      (click)="toggleDropdown('profile')"
      class="dropdown-btn w-10 h-10 flex items-center justify-center rounded-full hover:ring-1 hover:ring-indigo-300 transition-colors duration-150 overflow-hidden"
      [ngClass]="{
        'bg-gradient-to-r from-pink-500 to-purple-500': !avatarUrl,
        'bg-gray-200': avatarUrl
      }"
      aria-label="View Profile"
      [attr.aria-expanded]="profileOpen"
      aria-describedby="profile-dropdown"
    >
      <img
        *ngIf="avatarUrl"
        [src]="avatarUrl"
        class="w-full h-full object-cover"
        alt="User Avatar"
        loading="lazy"
      />
      <span *ngIf="!avatarUrl" class="font-bungee text-white text-lg">{{ userName.charAt(0).toUpperCase() }}</span>
    </button>
    <div
      *ngIf="profileOpen"
      id="profile-dropdown"
      class="dropdown-menu absolute right-0 mt-1 w-44 bg-white/90 backdrop-blur-sm rounded-lg shadow-sm py-1 z-20 transition-all duration-150 ease-in-out transform origin-top"
      [ngClass]="{
        'opacity-0 scale-95 -translate-y-2': !profileOpen,
        'opacity-100 scale-100 translate-y-0': profileOpen
      }"
    >
      <p class="px-3 py-1 text-gray-800 text-sm">{{ userName }}</p>
      <label class="block px-3 py-1 text-gray-800 text-sm hover:bg-gray-50 cursor-pointer">
        Upload Avatar
        <input
          type="file"
          accept="image/*"
          (change)="onAvatarUpload($event)"
          class="hidden"
        />
      </label>
      <button
        (click)="logout()"
        class="block w-full text-left px-3 py-1 text-red-600 hover:bg-red-50 text-sm"
      >
        Logout
      </button>
    </div>
  </div>
</div>
 </nav>
</header>
<main>
  <app-layout></app-layout>
</main>